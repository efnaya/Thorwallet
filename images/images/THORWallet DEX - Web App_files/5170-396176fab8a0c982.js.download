"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5170],{47122:function(e,t,n){n.d(t,{h:function(){return f}});var r=n(90116),a=n(26036),o=n(67294),s=n(23925),i=n(29046),c=n(30909),l=n(85893);function u(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){i=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=s.default.input.withConfig({displayName:"InputDigits__InputValue",componentId:"sc-19akynk-0"})(["background:none;border:none;font-size:16px;font-weight:700;color:",";outline:none;text-align:right;font-family:'Montserrat',sans-serif;::-webkit-outer-spin-button,::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}"],i.Rl.white),f=function(e){var t=e.digits,n=e.setDigits,s=e.isFiat,i=e.balance,d=(0,o.useCallback)((function(e){if(t.length>=11)n(t);else if(0===t.length&&e.includes("."))n(["0","."]);else{var a=(0,r.Z)(e.split(""));a.length>0&&"0"===a[0]&&a.length>1&&"."!==a[1]&&a.shift();var o,s=0,i=u(a);try{for(i.s();!(o=i.n()).done;){"."===o.value&&(s+=1)}}catch(c){i.e(c)}finally{i.f()}s>1||n((0,r.Z)(a))}}),[t,n]),f=(0,o.useCallback)((function(){if(0!==t.length){var e=(0,r.Z)(t);e.pop(),n(e)}}),[t,n]);return(0,l.jsxs)("label",{htmlFor:"value",style:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(p,{id:"value",type:"text",value:0===t.length?"0":(0,a.Y)(t.map((function(e){return e})).join(""),{forceAtLeastTwoDigits:!1,separator:","}),onChange:function(e){var t=e.target.value.replace(/[^\d.-]/g,"");d(t)},onKeyDown:function(e){"Backspace"==e.key&&(e.preventDefault(),f())},placeholder:"0.00",autoComplete:"off",size:0===t.length?1:(0,a.Y)(t.map((function(e){return e})).join(""),{forceAtLeastTwoDigits:!1,separator:","}).length}),(0,l.jsx)(c.d8,{margin:"4px 0",children:s?"USD":i.asset.ticker})]})}},65170:function(e,t,n){n.d(t,{Y:function(){return Re}});var r=n(17674),a=n(50029),o=n(87794),s=n.n(o),i=n(9669),c=n.n(i),l=n(91261),u=n(13395),d=n(14660),p=n(95445),f=n(22538),h=n(67294),m=n(74931),g=n(42326),x=n(28809),b=n(59499),y=n(48771),w=n(55500),j=n(47662),v=n(22044),k=n(24497),S=n(15737),O=n(17766),C=n(96440),E=n(79984),P=n(21597),T=n(23101),A=n(14198),D=n(27819),I=n(23925),R=n(29046);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z,N,z,B={menu:function(){return{background:R.Rl.BG2,borderRadius:16,padding:8,position:"absolute",width:"100%",zIndex:1,minWidth:160}},control:function(){return{display:"flex",padding:"2px 8px",background:R.Rl.BG3,borderRadius:16,jusifyContent:"space-between",minWidth:180,height:44,marginTop:10,border:"1px solid rgba(102,119,129,0.5)",backgroundColor:"transparent",width:"400px"}},valueContainer:function(){return{display:"flex"}},menuList:function(e){return F(F({},e),{},{"::-webkit-scrollbar":{width:"4px",height:"0px"},"::-webkit-scrollbar-track":{background:"transparent"},"::-webkit-scrollbar-thumb":{background:R.Rl.textDark},"::-webkit-scrollbar-thumb:hover":{background:"#555"}})},input:function(e){return F(F({},e),{},{color:R.Rl.white})},option:function(){return{cursor:"pointer",padding:"8px 2px",color:R.Rl.white,fontSize:"14px",":hover":{backgroundColor:"#444"}}},placeholder:function(){return{marginTop:"8px",marginLeft:"4px",color:R.Rl.white,width:"140px"}},dropdownIndicator:function(e){return F(F({},e),{},{marginLeft:"205px"})}},M=n(42047),L=n(30909),W=n(90421),G=n(191);function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}var U=function(e){return h.createElement("svg",H({width:35,height:35,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Z||(Z=h.createElement("g",{filter:"url(#send-icon_svg__a)"},h.createElement("rect",{width:35,height:35,rx:17.5,fill:"#828D93"}))),N||(N=h.createElement("path",{d:"m17.76 26.213 3.295-3.313a.43.43 0 0 0 0-.608l-.253-.253a.43.43 0 0 0-.608 0l-2.165 2.183V8.43a.43.43 0 0 0-.43-.43h-.287a.43.43 0 0 0-.43.43v15.792l-2.164-2.183a.43.43 0 0 0-.608 0l-.253.253a.43.43 0 0 0 0 .608l3.295 3.313a.43.43 0 0 0 .608 0Z",fill:"#F2F2F2"})),z||(z=h.createElement("defs",null,h.createElement("filter",{id:"send-icon_svg__a",x:-40,y:-40,width:115,height:115,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},h.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),h.createElement("feGaussianBlur",{in:"BackgroundImage",stdDeviation:20}),h.createElement("feComposite",{in2:"SourceAlpha",operator:"in",result:"effect1_backgroundBlur_450_7668"}),h.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_backgroundBlur_450_7668",result:"shape"})))))},Y=n(70275),q=n(601),K=n(85081),V=n(26036),$=n(46383),J=n(85893),Q=function(e){var t=e.balance,n=e.assetDetails,a=(0,$.L)("conversionRate"),o=(0,r.Z)(a,1)[0];t.amount&&(0,K.ui)((0,y.Bo)(t.amount),n.assetPriceUSD,o);return(0,J.jsx)(l.kC,{alignItems:"flex-end",children:(0,J.jsxs)(L.VY,{color:R.Rl.TRANSPARENT_WHITE,size:"s",children:["Balance:"," ",t.amount?(0,V.Y)((0,q.az)(t,4),{forceAtLeastTwoDigits:!1,separator:","}):0," ",t.asset.ticker]})})},X=n(39676),ee=n(47122),te=n(51027);function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ae=(0,I.default)((function(e){return(0,J.jsx)(l.kC,re({},e))})).withConfig({displayName:"SendAmountGrid__Wrapper",componentId:"sc-xxgmy1-0"})(["background:rgba(255,255,255,0.15);border-radius:16px;padding:16px;position:relative;margin-bottom:4px;"]),oe=(0,I.default)((function(e){return(0,J.jsx)(l.kC,re({},e))})).withConfig({displayName:"SendAmountGrid__LogoWrapper",componentId:"sc-xxgmy1-1"})(["margin-right:8px;@media screen and (max-width:","){margin-right:8px;}"],R.dp.tablet),se=function(e){var t=e.balance,n=e.setDigits,a=e.digits,o=(e.options,e.poolsArray,e.setSelectedBalance),s=(e.index,e.setIndex,e.onMultiply),i=e.address,c=e.setAddress,d=e.memo,p=e.setMemo,g=e.selectOptions,x=e.isOpenSelect,b=(0,h.useState)(0),I=b[0],_=b[1],F=(0,h.useState)(!1),Z=F[0],N=F[1],z=(0,S.$)(),H=(0,A.LN)("network"),q=(0,r.Z)(H,1)[0],K=(0,D.O)("poolsArray"),V=(0,r.Z)(K,1)[0],$=(0,T.o)("decimals"),ne=(0,r.Z)($,1)[0],se=(0,O.e)(),ie=(0,P.yP)(),ce=(0,E.l)("rawBalances"),le=(0,r.Z)(ce,1)[0],ue=(0,f.Ru)(),de=ue.isConnected?le:ie,pe=V.map((function(e){var t;return{asset:(0,v.U)(e.asset),amount:(0,u.X)(1e3,null===(t=ne[e.asset])||void 0===t?void 0:t.decimals)}})),fe=(0,j.el)(t.asset)||(0,j.g1)(t.asset)||(0,j.Z_)(t.asset)||(0,j.Fu)(t.asset),he=(0,h.useCallback)((function(e){p(e)}),[]),me=function(e){return(0,J.jsxs)(l.kC,re(re({ref:e.innerRef,alignItems:"center",style:{margin:"8px 0",cursor:"pointer"}},e.innerProps),{},{children:[(0,J.jsx)(oe,{children:(0,k.n)(e.data.asset,32).logo}),(0,J.jsx)(X.i,{asset:e.data.asset,width:"100"})]}))};return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)(l.kC,{flexFlow:"column nowrap",children:[(0,J.jsxs)(ae,{alignItems:"center",flexFlow:"column nowrap",children:[(0,J.jsxs)(l.kC,{justifyContent:"space-between",style:{width:"100%",marginBottom:24},alignItems:"center",children:[(0,J.jsx)(C.ZP,{components:{SingleValue:me,Option:me,DropdownIndicator:function(){return(0,J.jsx)(w.Z,{width:12,fill:R.Rl.white})},IndicatorSeparator:function(){return(0,J.jsx)(J.Fragment,{})}},options:ue.isConnected?de.filter((function(e){return e.balance.amount.amount().gt(0)})).map((function(e){return{asset:e.balance.asset,amount:e.balance.amount}})):pe.filter((function(e){return e.amount.amount().gt(0)})).map((function(e){return{asset:e.asset,amount:e.amount}})),value:t,styles:M.X,onChange:function(e){return function(e){o(e)}(e)},isSearchable:!0,autoFocus:!1}),(0,J.jsx)(ee.h,{digits:a,setDigits:n,isFiat:!1,balance:t})]}),(0,J.jsxs)(l.kC,{justifyContent:"space-between",style:{width:"100%"},alignItems:"center",children:[(0,J.jsx)(Q,{balance:t,assetDetails:z.get(t.asset)}),ue.isConnected&&(0,J.jsx)(Y.P,{onMultiply:s,activeMultiplyer:I,setActiveMultiplyer:_})]}),(0,J.jsx)(l.kC,{style:{position:"absolute",bottom:-24,cursor:"pointer"},children:(0,J.jsx)(U,{width:40,height:40})})]}),(0,J.jsxs)(ae,{alignItems:"center",flexFlow:"column nowrap",children:[(0,J.jsxs)(l.kC,{children:[(0,J.jsx)(W.Z,{width:20,fill:R.Rl.white,style:{flexShrink:0,marginRight:8}}),(0,J.jsx)(L.VY,{size:"xs",children:"Make sure to enter a(n) ".concat(t.asset.synth?y.qo.THORChain:t.asset.chain," address. Any other address might result in permanent loss.")})]}),(0,J.jsxs)(l.kC,{style:{position:"relative",width:"100%"},children:[(0,J.jsx)("input",{className:"input",style:{width:"100%",padding:14,height:"auto",paddingRight:48,color:R.Rl.white},placeholder:"Recipient Address",value:i,onChange:function(e){return c(e.target.value)}}),(0,J.jsx)(l.zx,{style:{position:"absolute",right:16,padding:0,top:8},bgc:"transparent",onClick:function(){return N(!Z)},children:(0,J.jsx)(G.Z,{width:26,fill:R.Rl.textHighlighted})})]}),fe&&(0,J.jsx)(l.kC,{style:{marginTop:20,width:"100%"},children:(0,J.jsx)("input",{placeholder:"Memo (optional)",className:"input",onChange:function(e){return he(e.target.value)},value:d,style:{width:"100%",padding:14,height:"auto",paddingRight:48,color:R.Rl.white}})}),x&&(0,J.jsx)(C.ZP,{components:{IndicatorSeparator:function(){return(0,J.jsx)(J.Fragment,{})}},options:g.map((function(e){return{label:e[1]}})),value:i,onChange:function(e){c(e.label)},autoFocus:!1,placeholder:"Select Address",isSearchable:!1,styles:B})]})]}),Z&&(0,J.jsx)(l.kC,{style:{width:"100%",top:"20%",left:"calc(50% - 210px)"},children:(0,J.jsx)(te.l,{onClose:function(){return N(!1)},setAddress:function(e){se&&(se.validateAddress(q,t.asset,e)?((0,m.ZP)("Address valid"),c(e)):m.ZP.error("The address ".concat(e," is not a valid ").concat(t.asset.symbol," address.\n          ").concat("testnet"===q?"You are in testnet mode, did you specify a mainnet address?":null,"\n            ")))}})})]})},ie=n(4),ce=n(75643),le=n(98925),ue=n(17172),de=n(13071),pe=n(8137),fe=n(60028),he=n(32141),me=n(12895),ge=n(70074),xe=n(71769),be=n(4102),ye=n(96649),we=n(84458),je=n(84863),ve=n(74855),ke=n(83253),Se=n.n(ke),Oe=n(66024),Ce=n(63410),Ee=n(46268);function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Te=(0,I.default)(l.kC).withConfig({displayName:"SendSummaryInfo__RotatedArrowContainer",componentId:"sc-10ykoz0-0"})(["flex-direction:column;transform:rotate(90deg);"]),Ae=(0,I.default)((function(e){return(0,J.jsx)(l.kC,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))})).withConfig({displayName:"SendSummaryInfo__Wrapper",componentId:"sc-10ykoz0-1"})(["flex-flow:column nowrap;border-radius:16px;padding:24px 0px 0px 0px;background:rgba(255,255,255,0.15);width:100%;align-items:center;margin:0 0 16px 0;"]),De=function(e){var t=e.amount,n=e.address,r=e.balance,a=e.fee,o=e.memo,s=(0,h.useState)(!1),i=s[0],c=s[1],l=(0,h.useCallback)((function(){(0,m.ZP)("Copied to clipboard",{duration:1e3,icon:"\ud83d\udc4f"})}),[]);return(0,J.jsxs)(J.Fragment,{children:[i&&(0,J.jsx)(Se(),{isOpen:i,onRequestClose:function(){return c(!1)},style:{content:{zIndex:2,maxWidth:720,margin:"0 auto",height:"fit-content",borderRadius:16,background:"linear-gradient(162.1deg, #445F5D 15.56%, #3E5461 94.73%)",border:"none",padding:"24px 32px"},overlay:{zIndex:2,background:"rgba(0,0,0,0.8)",backdropFilter:"blur(10px)"}},children:(0,J.jsx)(Oe.m,{fee:a,balance:r,memo:o})}),(0,J.jsxs)(Ae,{children:[(0,J.jsx)(Ce.R,{asset:r.asset,size:55}),(0,J.jsx)(L.FE,{color:R.Rl.TRANSPARENT_WHITE,size:"s",margin:"16px 0 0",children:"You send"}),(0,J.jsxs)(L.d8,{size:"m",children:[r.asset.ticker," ",(0,V.Y)(t.join(""),{forceAtLeastTwoDigits:!0,separator:","})]}),(0,J.jsx)(Te,{children:(0,J.jsx)(je.Z,{fill:R.Rl.white,width:22,height:22})}),(0,J.jsx)(L.FE,{color:R.Rl.TRANSPARENT_WHITE,size:"s",margin:"16px 0 0",children:"To the following address"}),(0,J.jsx)(ve.CopyToClipboard,{text:n,onCopy:function(){return l()},children:(0,J.jsxs)(L.d8,{size:"m",children:[n.slice(0,12),"..",n.slice(n.length-3,n.length)]})}),(0,J.jsx)(Ee.P,{fee:a,onPress:function(){return c(!0)}})]})]})},Ie=function(e){var t=e.balance,n=e.address,o=e.rowAmount,i=e.memo,c=e.setTxs,p=e.onNextStep,m=(0,A.LN)("network"),g=(0,r.Z)(m,1)[0],x=(0,me.$)("phrase"),b=(0,r.Z)(x,1)[0],w=(0,he.Q)("feeOptionKey"),j=(0,r.Z)(w,1)[0],v=(0,fe.J)("prices"),k=(0,r.Z)(v,1)[0],C=(0,O.e)(),E=(0,de.C)().storeTx,P=(0,h.useState)(!1),T=P[0],D=P[1],I=(0,h.useState)(!1),_=I[0],F=I[1],Z=(0,S.$)(),N=(0,f.Ru)(),z=(0,ce.S)(t).address;if(!C)throw new Error("expected to have client");var B=function(e){var t=e.balance,n=e.network,r=e.amount,o=e.isFocused,i=e.memo,c=e.from,l=e.recipient,d=(0,h.useState)({type:"send",state:"init"}),p=d[0],f=d[1],m=(0,O.e)(),g=(0,h.useCallback)((0,a.Z)(s().mark((function e(){var a,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}return e.abrupt("return");case 2:if(o){e.next=4;break}return e.abrupt("return");case 4:return console.log("calculating sending fee",Date.now()),a=(0,u.p)(r.join(""),t.amount.decimal),e.prev=6,f({type:"send",state:"loading"}),e.next=10,(0,xe.s)({amount:a,asset:t.asset,network:n,memo:i,senderAddress:c,recipient:l});case 10:d=e.sent,f({type:"send",state:"success",feeTx:d}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(6),console.log("useSendFee error: ",String(e.t0)),f({type:"send",state:"error",feeError:e.t0});case 18:case"end":return e.stop()}}),e,null,[[6,14]])}))),[m,o,r,t.amount.decimal,t.asset,n,i,c,l]);return(0,h.useEffect)((function(){g()}),[g]),(0,h.useMemo)((function(){return p}),[p])}({amount:o,balance:t,network:g,isFocused:!0,memo:null,from:z,recipient:n}),M=(0,h.useCallback)((0,a.Z)(s().mark((function e(){var r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if("success"===B.state){e.next=4;break}throw new Error("no fee was calculated");case 4:if("add-liquidity"!==B.type&&"withdraw"!==B.type){e.next=6;break}throw new Error("expected fees of different type");case 6:if(N.walletType!==f.Sq.Phrase||b){e.next=8;break}throw new Error("phrase not fetched yet");case 8:return D(!0),(0,d.L9)(d.eb.ACTION_WIDGET_SEND,{fromAsset:t.asset.symbol}),r=(0,u.p)(o.join(""),t.amount.decimal),e.prev=11,e.next=14,C.sendAssets({asset:t.asset,recipient:n,amount:r,feeOptionKey:j,fee:B.feeTx,memo:i,phrase:b,network:g,gasPrices:"eth-fees"===B.feeTx.type?k[B.feeTx.chainId]:k[ie.S.Ethereum],nonce:(0,pe.Po)()});case 14:return a=e.sent,E({asset:t.asset,amount:o.join(""),state:{state:"success"},type:ge.q.SEND,sendDate:new Date,receiveDate:new Date,tx:a}),e.prev=16,e.t0=ue._,e.t1=a.txHash,e.next=21,C.getAddress(g,t.asset.chain);case 21:return e.t2=e.sent,e.t3=n,e.t4=t.asset,e.t5=t.asset,e.t6=r,e.t7=Z.get(t.asset).assetPriceUSD,e.t8=a.memo,e.t9={type:"send",txHash:e.t1,fromAddress:e.t2,toAddress:e.t3,poolAsset:e.t4,fromAsset:e.t5,amount:e.t6,fromAssetPrice:e.t7,memo:e.t8},e.next=31,(0,e.t0)(e.t9);case 31:e.next=36;break;case 33:e.prev=33,e.t10=e.catch(16),console.log("could not send transaction stat to backend");case 36:c([{broadcastType:"not-error",amount:r,balance:t,action:"send",tx:a}]),p(),e.next=45;break;case 40:e.prev=40,e.t11=e.catch(11),console.log("send assets failed",String(e.t11)),c([{amount:r,error:e.t11,broadcastType:"error",balance:t,action:"send"}]),p();case 45:case"end":return e.stop()}}),e,null,[[11,40],[16,33]])}))),[t,B,b,o,C,n,j,i,Z,g,k]),L=(0,h.useMemo)((function(){return(0,u.p)(o.join(""),t.amount.decimal).gt((0,y.Bo)(t.amount))}),[t.amount,o]);return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)(l.kC,{flexFlow:"column nowrap",alignItems:"center",children:[(0,J.jsx)(De,{amount:o,address:n,balance:t,fee:B,memo:i}),(0,J.jsx)("a",{href:"https://thorchain.help/",target:"_blank",style:{margin:"6px 0 16px 0",color:R.Rl.textHighlighted},children:"FAQ THORChain"}),"error"===B.state&&(0,J.jsx)(we.L,{error:B.feeError}),L&&(0,J.jsx)(be.o,{errorType:"maxSend"}),(0,J.jsx)(l.zx,{onClick:function(){return N.walletType===f.Sq.Phrase?F(!0):M()},disabled:T||"success"!==B.state||L,style:{width:"100%"},children:T?(0,J.jsx)(le.CJ,{color:R.Rl.white,width:24,height:24}):"Send ".concat(o.join("")," ").concat(t.asset.ticker)})]}),(0,J.jsx)(ye.b,{isOpen:_,onRequestClose:function(){return F(!1)},onContinue:function(){F(!1),M()}})]})},Re=function(e){var t,n=e.balance,o=e.poolsArray,i=(0,f.Ru)();if(!n)throw new Error("expected to have balance");var b=(0,h.useState)(n),y=b[0],w=b[1],j=(0,h.useState)(0),v=j[0],k=j[1],S=(0,h.useState)(1),O=S[0],C=S[1],E=(0,h.useState)(""),P=E[0],T=E[1],A=(0,h.useState)(),D=A[0],I=A[1],R=(0,h.useState)(""),_=R[0],F=R[1],Z=(0,h.useState)([]),N=Z[0],z=Z[1],B=(0,h.useState)(!1),M=B[0],L=(B[1],(0,h.useState)(!1)),W=L[0],G=L[1],H=(0,h.useState)([]),U=H[0],Y=H[1],q=(0,h.useMemo)((function(){return[{id:"crypto",ticker:y.asset.ticker,balance:y},{id:"fiat",ticker:"USD",balance:"fiat"}]}),[y]),K=(0,h.useState)(q.map((function(){return[]}))),V=K[0],$=K[1],Q=(0,p.w)({balances:[n],options:q,digits:V,setDigits:$,selectedIndex:v,setSelectedIndex:k}),X=Q.onDigits,ee=Q.onMultiply,te=(0,h.useCallback)((0,a.Z)(s().mark((function e(){var t,n,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.isConnected){e.next=2;break}return e.abrupt("return");case 2:if((0,d.L9)(d.eb.ACTION_WIDGET_SEND_PREVIEW,{fromAsset:y.asset.symbol}),n=(0,u.p)((null!==(t=V[0])&&void 0!==t?t:["0"]).join(""),y.amount.decimal),!P.includes(".")){e.next=29;break}return e.next=7,c().get("https://resolve.unstoppabledomains.com/domains/".concat(P),{headers:{Authorization:"Bearer ".concat("c947c887-9296-441b-b839-48b3aafbd485")}}).then((function(e){return e.data.records})).catch((function(e){return m.ZP.error(e.message)}));case 7:if(a=e.sent,0!==Object.keys(a).length){e.next=11;break}return m.ZP.error("Invalid domain"),e.abrupt("return");case 11:if(o=Object.entries(a).filter((function(e){return(0,r.Z)(e,1)[0].includes("crypto.".concat(y.asset.ticker))})),console.log(o),0!==o.length){e.next=16;break}return m.ZP.error("No address found"),e.abrupt("return");case 16:if(1!==o.length){e.next=27;break}if(G(!1),!(o[0][1]&&o[0][1].length>0)){e.next=23;break}T(o[0][1]),C(2),e.next=25;break;case 23:return m.ZP.error("Domain has no address set up for the selected chain."),e.abrupt("return");case 25:e.next=29;break;case 27:G(!0),Y(o);case 29:I(n),M||P.includes(".")||C(2);case 31:case"end":return e.stop()}}),e)}))),[y,V,P]);return(0,J.jsxs)(l.kC,{flexFlow:"column nowrap",style:{width:"100%"},children:[1===O&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(se,{balance:y,setDigits:X,digits:null!==(t=V[v])&&void 0!==t?t:["0"],options:q,poolsArray:o,setSelectedBalance:w,index:v,setIndex:k,onMultiply:ee,setAddress:T,address:P,memo:_,setMemo:F,isOpenSelect:W,selectOptions:U}),(0,J.jsx)(l.zx,{style:{marginTop:24},onClick:function(){return i.isConnected?te():void g.e.setGlobalState("modal",{type:"connect-wallet"})},disabled:i.isConnected&&!P,withShadow:!0,children:i.isConnected?"Preview Send":"Connect Wallet"})]}),2===O&&(0,J.jsx)(Ie,{balance:y,address:P,rowAmount:D.amount().toFixed().split(""),memo:_,setTxs:z,onNextStep:function(){return C(3)}}),3===O&&(0,J.jsx)(x.N,{from:y.asset,type:"send",action:"send",shouldTransitionToMidgardStats:!1,routeTxs:N,to:{}})]})}},66024:function(e,t,n){n.d(t,{m:function(){return y}});var r=n(17674),a=n(4),o=n(91261),s=n(67294),i=n(29046),c=n(30909),l=n(47662),u=n(45992),d=n(99590),p=n(58711),f=n(15737),h=n(32622),m=n(60028),g=n(32141),x=n(31423),b=n(85893),y=function(e){var t=e.balance,n=e.fee,y=e.memo;if("success"!==n.state)throw new Error("cannot display send information");if("add-liquidity"===n.type)throw new Error("Expected fees of different type");if("withdraw"===n.type)throw new Error("Expected fees of different type");var w=(0,f.$)(),j=n.feeTx,v=(0,g.Q)("feeOptionKey"),k=(0,r.Z)(v,1)[0],S=(0,m.J)("prices"),O=(0,r.Z)(S,1)[0],C=(0,h.L)(),E=(0,s.useMemo)((function(){return"terra-fees"===n.feeTx.type?n.feeTx.asset.ticker:(0,l.di)(t.asset).ticker}),[t.asset,n.feeTx]);return(0,b.jsxs)(o.kC,{flexFlow:"column nowrap",children:[(0,b.jsx)(c.bB,{size:"xs",color:i.Rl.TRANSPARENT_WHITE,children:"SEND DETAILS"}),(0,b.jsx)(x.e,{title:"Speed",data:"".concat((0,p.u)(k))}),j?(0,b.jsx)(x.e,{title:"".concat(E," Fee"),data:"".concat((0,u.J)({fee:j,feeOptionKey:k,gasPrices:"eth-fees"===n.feeTx.type?O[n.feeTx.chainId]:O[a.S.Ethereum]})," ").concat(E)}):null,(0,b.jsx)(x.e,{title:"".concat(E," Fee in USD"),data:"".concat((0,d.r)({fee:n,feeOptionKey:k,getPrice:w,gasPrices:"eth-fees"===n.feeTx.type?O[n.feeTx.chainId]:O[a.S.Ethereum],inboundAddresses:C}).toFixed(2)," USD")}),null!==y?(0,b.jsx)(x.e,{title:"Memo",data:(0,b.jsx)(c.FE,{children:y})}):null]})}},75643:function(e,t,n){n.d(t,{S:function(){return o}});var r=n(67294),a=n(21597),o=function(e){var t,n=(0,a.yP)(),o=null===e||void 0===e||null===(t=e.asset)||void 0===t?void 0:t.chain;return(0,r.useMemo)((function(){var e,t;return{address:null!==(e=null===(t=n.find((function(e){return e.chain===o})))||void 0===t?void 0:t.address)&&void 0!==e?e:""}}),[o,n])}}}]);