"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6195],{191:function(e,t,n){var r,s=n(67294);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}t.Z=function(e){return s.createElement("svg",o({viewBox:"0 0 22 26",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=s.createElement("path",{d:"M0 11h9.429V1.571H0V11Zm1.964-7.464h5.5v5.5h-5.5v-5.5ZM12.571 1.57V11H22V1.571h-9.429Zm7.465 7.465h-5.5v-5.5h5.5v5.5ZM0 23.57h9.429v-9.428H0v9.428Zm1.964-7.464h5.5v5.5h-5.5v-5.5Zm1.572 1.572h2.357v2.357H3.536v-2.357Zm0-12.572h2.357v2.357H3.536V5.107Zm14.928 2.357h-2.357V5.107h2.357v2.357Zm1.965 6.679H22v6.286h-6.286v-1.572h-1.571v4.714H12.57v-9.428h4.715v1.571h3.143v-1.571Zm0 7.857H22v1.571h-1.571V22Zm-3.143 0h1.571v1.571h-1.571V22Z"})))}},4102:function(e,t,n){n.d(t,{o:function(){return i}});var r=n(67294),s=n(29046),o=n(30909),a=n(85893),i=function(e){var t=e.errorType,n=(0,r.useMemo)((function(){switch(t){case"maxWithdraw":return"You are trying to withdraw more funds than you have in the pool.";case"minWithdraw":return"You are trying to withdraw an amount that is too small.";case"maxStake":return"You are trying to stake more funds than you have.";case"minStake":return"You are trying to stake a TGT amount which is too small.";case"maxSwap":return"You are trying to swap more funds than you own!";case"minSwap":return"You are trying to swap an amount that is too small. ";case"maxAddLiq":return"You are trying to add more funds to the liquidity pool than you own.";case"minAddLiq":return"You are trying to add a smaller amount to the liquidity pool than allowed.";case"maxSend":return"You are trying to send more funds than you own.";case"minSend":return"You are trying to send an amount which is too small.";case"maxUpgrade":return"You are trying to upgrade more RUNE than you own.";case"minUpgrade":return"You are trying to upgrade an amount of RUNE which is too small. ";case"minRune":return"You don't have enough RUNE for transaction. ";case"maxAddLiqDanger":return"WARNING: You are about to add all of your funds into the pool. If you have 0 funds in your wallet you will not be able to withdraw funds from the pool. It is advised to keep some funds in your wallet at all times.";case"walletIsEmpty":return"WARNING: You probably do not have enough funds in your wallet. There needs to be some funds in your wallet in order to cover fees when withdrawing from the pool";default:return""}}),[t]);return n?(0,a.jsx)(o.VY,{size:"s",color:s.Rl.WARNING,margin:"8px 0",children:n}):null}},63410:function(e,t,n){n.d(t,{R:function(){return i}});var r=n(91261),s=n(67294),o=n(24497),a=n(85893),i=function(e){var t=e.asset,n=e.size,i=void 0===n?50:n,l=(0,s.useMemo)((function(){return(0,o.n)(t,Number(i))}),[t,i]).logo;return(0,a.jsx)(r.kC,{children:l})}},13231:function(e,t,n){n.d(t,{H:function(){return o}});n(67294);var r=n(24204),s=n(85893),o=function(e){var t=e.label,n=e.feeError,o=e.active,a=e.onSelect;return n?null:(0,s.jsx)(r.$,{label:t,isChecked:o,onChange:function(){return a(!o)}})}},51027:function(e,t,n){n.d(t,{l:function(){return c}});var r=n(67294);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}var o=function(e){return r.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256"},e),r.createElement("path",{d:"M80.852 81.852H61.785a1 1 0 1 1 0-2h18.066V61.785a1 1 0 1 1 2 0v19.066a1 1 0 0 1-.999 1.001zM28.215 81.852H9.148a1 1 0 0 1-1-1V61.785a1 1 0 1 1 2 0v18.066h18.067a1 1 0 1 1 0 2.001zM9.148 29.215a1 1 0 0 1-1-1V9.148a1 1 0 0 1 1-1h19.067a1 1 0 0 1 0 2H10.148v18.067a1 1 0 0 1-1 1zM80.852 29.215a1 1 0 0 1-1-1V10.148H61.785a1 1 0 1 1 0-2h19.066a1 1 0 0 1 1 1v19.067a.999.999 0 0 1-.999 1z",style:{stroke:"none",strokeWidth:1,strokeDasharray:"none",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:10,fillRule:"nonzero",opacity:1},transform:"matrix(2.3 0 0 2.3 25 30)"}))},a=n(22090),i=n.n(a),l=n(29046),u=n(85893),c=function(e){var t=e.onClose,n=e.setAddress,s=(0,r.useState)(100),a=s[0];s[1];return(0,u.jsxs)("div",{style:{position:"relative"},children:[(0,u.jsx)(i(),{delay:a,style:{height:420,width:420},onError:function(e){console.error(e),t()},onScan:function(e){var r;(r=e)&&(n(r.text),t(),console.log(r))}}),(0,u.jsx)(o,{width:420,height:360,style:{position:"absolute",left:0,top:30,fill:l.Rl.TRANSPARENT_WHITE}})]})}},6195:function(e,t,n){n.d(t,{o:function(){return ot}});var r,s,o,a=n(50029),i=n(17674),l=n(87794),u=n.n(l),c=n(48771),d=n(91261),f=n(13395),m=n(14660),p=n(47662),h=n(3797),g=n(32622),w=n(17766),x=n(44431),y=n.n(x),b=n(67294),v=n(80826),A=n(17277),j=n(29224),k=n(60028),S=n(32141),F=n(14198),O=n(27819),D=n(96646),C=n(1638),R=function(e){var t=e.pool,n=e.iA,r=e.toRune,s=e.affiliateFee,o=e.nonRuneAssetDecimals,a=e.networkFeeAssetAmount,i=e.transactionFeeInAsset,l=e.withFees;if(!t)return{outputAmount:(0,f.p)(0,0),slip:new(y())(0)};var u=(0,f.p)(1,D.YS).times((0,C.h)(t.runeDepth)),c=(0,f.p)(1,o).times((0,C.h)(t.assetDepth)),d=r?u:c,m=r?c:u,p=n.times(new(y())(1).minus(s)).minus(l&&(null===i||void 0===i?void 0:i.amount.amount())||0);return{outputAmount:d.times(p).times(m).div(p.plus(m).times(p.plus(m))).minus(l&&(null===a||void 0===a?void 0:a.amount())||0),slip:n.div(n.plus(m)).amount()}},P=function(){var e=(0,a.Z)(u().mark((function e(t){var n,r,s,o,a,i,l,d,f,m,h,g,w,x,b,v,A,j;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.iA,t.client,r=t.fromAssetBalance,s=t.toAssetBalance,o=t.fromAssetPool,a=t.toAssetPool,i=t.affiliateFee,l=t.transactionFeeInAsset,d=t.withFees,f=t.networkFeeAssetAmount,r){e.next=3;break}throw new Error("from asset balance expected.");case 3:if(s){e.next=5;break}throw new Error("to asset balance expected.");case 5:if(m=(0,p.Z_)(r.asset),h=(0,p.Z_)(s.asset),o||console.log("No pool found for from-asset ".concat((0,c.rx)(r.asset))),a||console.log("No pool found for to-asset ".concat((0,c.rx)(s.asset))),!m&&!h){e.next=12;break}return g=h?o:a,e.abrupt("return",R({pool:g,iA:n,toRune:h,affiliateFee:i,nonRuneAssetDecimals:h?r.amount.decimal:s.amount.decimal,transactionFeeInAsset:l,withFees:d,networkFeeAssetAmount:f}));case 12:return w=R({pool:o,iA:n,toRune:!0,affiliateFee:i,nonRuneAssetDecimals:r.amount.decimal,transactionFeeInAsset:l,withFees:d,networkFeeAssetAmount:f}),x=w.outputAmount,b=w.slip,v=R({pool:null!==a&&void 0!==a?a:null,iA:x,toRune:!1,affiliateFee:new(y())(0),nonRuneAssetDecimals:s.amount.decimal,transactionFeeInAsset:null,withFees:d,networkFeeAssetAmount:null}),A=v.outputAmount,j=v.slip,e.abrupt("return",{outputAmount:A,slip:b.plus(j)});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=n(2129),E=n(15771),I=n(4611),M=n(95445),N=n(15737),Z=n(76737),V=n(22538),L=n(11163),_=n(98613),U=n(79984),B=n(42326),z=n(12895),W=n(95531),Y=n(59499),H=n(42274),q=n(55500),G=n(74931),Q=n(21597),$=n(23925),K=n(29046),J=n(30909),X=n(191);function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ee.apply(this,arguments)}var te=function(e){return b.createElement("svg",ee({width:35,height:35,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=b.createElement("g",{filter:"url(#swap-icon_svg__a)"},b.createElement("rect",{width:35,height:35,rx:17.5,fill:"#828D93"}))),s||(s=b.createElement("path",{d:"m15.029 8.126 3.295 3.313a.43.43 0 0 1 0 .607l-.253.254a.43.43 0 0 1-.608 0l-2.165-2.183V25.91a.43.43 0 0 1-.43.43h-.286a.43.43 0 0 1-.43-.43V10.117L11.987 12.3a.43.43 0 0 1-.608 0l-.253-.254a.43.43 0 0 1 0-.607l3.295-3.313a.43.43 0 0 1 .608 0Zm5.73 18.087 3.296-3.313a.43.43 0 0 0 0-.608l-.253-.253a.43.43 0 0 0-.608 0l-2.165 2.183V8.43a.43.43 0 0 0-.43-.43h-.286a.43.43 0 0 0-.43.43v15.792l-2.165-2.183a.43.43 0 0 0-.608 0l-.253.253a.43.43 0 0 0 0 .608l3.295 3.313a.43.43 0 0 0 .608 0Z",fill:"#F2F2F2"})),o||(o=b.createElement("defs",null,b.createElement("filter",{id:"swap-icon_svg__a",x:-40,y:-40,width:115,height:115,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},b.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),b.createElement("feGaussianBlur",{in:"BackgroundImage",stdDeviation:20}),b.createElement("feComposite",{in2:"SourceAlpha",operator:"in",result:"effect1_backgroundBlur_450_3441"}),b.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_backgroundBlur_450_3441",result:"shape"})))))},ne=n(70275),re=n(24325),se=n(85893),oe=$.default.input.withConfig({displayName:"InputDigitsRecived__InputValue",componentId:"sc-17htfr2-0"})(["background:none;border:none;font-size:16px;font-weight:700;color:",";outline:none;text-align:right;font-family:'Montserrat',sans-serif;::-webkit-outer-spin-button,::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}"],K.Rl.white),ae=function(e){var t=e.digits,n=e.setDigits,r=e.isFiat,s=(e.balance,e.setUSDValue),o=e.assetPrice,a=e.insertMode,i=e.setInsertMode,l=e.from,u=e.to,c=e.swapOutput,d=e.receivedValue,f=e.setReceivedValue,m=(0,N.$)(),p=(0,b.useMemo)((function(){return m.get(l.asset).assetPriceUSD}),[m,l.asset]),h=(0,b.useMemo)((function(){return r?c.times(p):c}),[r,c,p]);return(0,b.useEffect)((function(){if("recivedCrypto"===a){var e=Number(t.join(""))*o;s(e.toFixed(2))}}),[t,n]),(0,b.useEffect)((function(){if("recivedCrypto"===a){var e=m.get(l.asset).assetPriceUSD,t=m.get(u.asset).assetPriceUSD.dividedBy(e).toNumber()*Number(d);n(t.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:10}).split(""))}}),[d]),(0,se.jsx)(se.Fragment,{children:(0,se.jsxs)("label",{htmlFor:"value",style:{display:"flex",alignItems:"center"},children:[(0,se.jsx)(oe,{id:"value",type:"text",value:"crypto"===a||"fiat"===a?h.amount().toNumber().toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:10}):d,onChange:function(e){n([]),i("recivedCrypto");var t=e.target.value.replace(/[^\d.-]/g,"");t.match(/^(\d*\.{0,1}\d{0,2}$)/)&&f(t)},placeholder:"0",autoComplete:"off",size:"crypto"===a||"fiat"===a?h.amount().toNumber().toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:10}).length:d.length})," ",(0,se.jsx)(J.d8,{margin:"4px 0",children:r?"USD":u.asset.ticker})]})})},ie=n(90116),le=n(26036);function ue(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ce(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,s=function(){};return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var de=$.default.input.withConfig({displayName:"InputDigitsSwap__InputValue",componentId:"sc-rs182v-0"})(["background:none;border:none;font-size:16px;font-weight:700;color:",";outline:none;text-align:right;font-family:'Montserrat',sans-serif;::-webkit-outer-spin-button,::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}"],K.Rl.white),fe=function(e){var t=e.digits,n=e.setDigits,r=e.isFiat,s=e.balance,o=e.setUSDValue,a=e.assetPrice,i=e.insertMode,l=e.setInsertMode,u=(0,b.useCallback)((function(e){if(t.length>=11)n(t);else if(0===t.length&&e.includes("."))n(["0","."]);else{var r=(0,ie.Z)(e.split(""));r.length>0&&"0"===r[0]&&r.length>1&&"."!==r[1]&&r.shift();var s,o=0,a=ue(r);try{for(a.s();!(s=a.n()).done;){"."===s.value&&(o+=1)}}catch(i){a.e(i)}finally{a.f()}o>1||n((0,ie.Z)(r))}}),[t,n]),c=(0,b.useCallback)((function(){if(0!==t.length){var e=(0,ie.Z)(t);e.pop(),n(e)}}),[t,n]);return(0,b.useEffect)((function(){if("crypto"===i){var e=Number(t.join(""))*a;o(e.toFixed(2))}0===t.length&&o("")}),[t,n]),(0,se.jsxs)("label",{htmlFor:"value",style:{display:"flex",alignItems:"center"},children:[(0,se.jsx)(de,{id:"value",type:"text",value:0===t.length?"0":(0,le.Y)(t.map((function(e){return e})).join(""),{forceAtLeastTwoDigits:!1,separator:","}),onChange:function(e){l("crypto");var t=e.target.value.replace(/[^\d.-]/g,"");u(t)},onKeyDown:function(e){"Backspace"==e.key&&(e.preventDefault(),c())},placeholder:"0.00",autoComplete:"off",size:0===t.length?1:(0,le.Y)(t.map((function(e){return e})).join(""),{forceAtLeastTwoDigits:!1,separator:","}).length}),(0,se.jsx)(J.d8,{margin:"4px 0",children:r?"USD":s.asset.ticker})]})},me=$.default.input.withConfig({displayName:"InputFiat__InputValue",componentId:"sc-42ttq7-0"})(["background:none;border:none;font-size:14px;font-weight:600;color:",";outline:none;text-align:right;font-family:'Montserrat',sans-serif;::-webkit-outer-spin-button,::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}"],K.Rl.textDark),pe=function(e){var t=e.usdValue,n=e.setUSDValue,r=(e.digitsUSD,e.digits,e.setDigits),s=e.isFiat,o=e.balance,a=e.assetPrice,i=e.insertMode,l=e.setInsertMode;return(0,b.useEffect)((function(){if("fiat"===i){var e=Number(t)/a;r(e.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:10}).split("")),n(t)}}),[t]),(0,se.jsxs)("label",{htmlFor:"value",style:{display:"flex",alignItems:"center"},children:[(0,se.jsx)(me,{id:"value",type:"text",value:t,onChange:function(e){var t=e.target.value.replace(/[^\d.-]/g,"");t.match(/^(\d*\.{0,1}\d{0,2}$)/)&&n(t),l("fiat")},placeholder:"0.00",autoComplete:"off",size:t.length}),(0,se.jsx)(J.VY,{margin:"4px 0",size:"s",color:K.Rl.textDark,children:s?"USD":o.asset.ticker})]})},he=n(51027),ge=n(601),we=function(e){var t=e.to,n=e.swapOutput,r=e.isFiat,s=(0,N.$)(),o=(0,b.useMemo)((function(){return s.get(t.asset).assetPriceUSD}),[s,t.asset]),a=(0,b.useMemo)((function(){return r?n.times(o):n}),[r,n,o]);return(0,se.jsx)(d.kC,{justifyContent:"center",children:r?(0,se.jsxs)(J.VY,{size:"s",color:K.Rl.textDark,margin:"0",children:["~"," ",(0,le.Y)((0,ge.Ay)(a,a.amount().gt(100)?2:8),{forceAtLeastTwoDigits:!0,separator:","})," ",r?"USD":t.asset.ticker]}):(0,se.jsxs)(J.d8,{color:K.Rl.white,center:!0,margin:"4px 0",children:["~"," ",(0,le.Y)((0,ge.Ay)(a,a.amount().gt(100)?2:8),{forceAtLeastTwoDigits:!0,separator:","})," ",r?"USD":t.asset.ticker]})})},xe=n(46242),ye=function(e){e.label;var t=e.from,n=e.to,r=e.isFrom,s=e.selectFrom,o=e.selectTo;return(0,se.jsx)(se.Fragment,{children:(0,se.jsx)(xe.N,{from:t,to:n,isFrom:r,selectFrom:s,selectTo:o})})},be=[{tolerance:new(y())(0)},{tolerance:new(y())(.01)},{tolerance:new(y())(.02)},{tolerance:new(y())(.03)},{tolerance:new(y())(.05)},{tolerance:new(y())(.1)},{tolerance:new(y())(.2)},{tolerance:new(y())(.3)},{tolerance:new(y())(.5)},{tolerance:new(y())(.75)}],ve=function(){var e=(0,S.Q)("tolerance"),t=(0,i.Z)(e,2),n=t[0],r=t[1],s=(0,b.useCallback)((function(e){r(e)}),[r]);return(0,se.jsxs)(d.kC,{flexFlow:"column nowrap",children:[(0,se.jsx)(J.VY,{size:"s",margin:"4px 0 24px",children:"By setting slippage tolerance, you are setting a minimum amount on how many tokens you will accept, in the event that the price increases or decreases."}),(0,se.jsx)(d.kC,{flexFlow:"row wrap",justifyContent:"space-between",children:be.map((function(e){return(0,se.jsx)(d.Yz,{onClick:function(){(0,m.L9)(m.eb.ACTION_WIDGET_SWAP_SLIP_TELERANCE,{level:e.tolerance.toString()}),s(e.tolerance)},bgc:n.eq(e.tolerance)?K.Rl.buttonBG:K.Rl.disabledButton,withShadow:n.eq(e.tolerance),color:n.eq(e.tolerance)?K.Rl.black:K.Rl.textDark,style:{margin:"0 8px 12px 0",padding:"8px 16px",width:"16%"},children:"".concat(e.tolerance.times(100)," %")},String(e.tolerance))}))})]})};function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var je=(0,$.default)((function(e){return(0,se.jsx)(d.kC,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){(0,Y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))})).withConfig({displayName:"SwapSelector__Wrapper",componentId:"sc-1n5hm24-0"})(["background:rgba(255,255,255,0.15);border-radius:16px;padding:16px;position:relative;margin-bottom:4px;"]),ke=function(e){var t=e.slip,n=e.swapOutput,r=e.onReverse,s=e.onPressFrom,o=e.onPressTo,a=e.from,i=e.to,l=e.isFiat,u=e.onMultiply,c=e.setDigits,f=e.digits,p=e.activeMultiplyer,h=e.setActiveMultiplyer,g=e.digitsUSD,x=e.usdValue,y=e.setUSDValue,v=e.insertMode,A=e.setInsertMode,j=e.receivedValue,k=e.setReceivedValue,S=e.recipientAddress,F=e.setRecipientAddress,O=(0,Q.yP)(),D=(0,N.$)(),C=(0,w.e)(),R=(0,V.Ru)(),P=(0,b.useState)(!1),T=P[0],E=P[1],I=(0,b.useState)(!1),M=I[0],Z=I[1];if(!O)throw new Error("expected to have balances");var L=(0,b.useCallback)((function(e,t){r(e,t),h(0)}),[r,a,i]),_=D.get(a.asset).assetPriceUSD.dividedBy(D.get(i.asset).assetPriceUSD).toFixed(7).toString(),U=D.get(a.asset).assetPriceUSD.toNumber();return(0,se.jsxs)(d.kC,{flexFlow:"column nowrap",children:[(0,se.jsxs)(je,{alignItems:"center",flexFlow:"column nowrap",children:[(0,se.jsxs)(d.kC,{justifyContent:"space-between",style:{width:"100%"},alignItems:"center",children:[(0,se.jsx)(ye,{label:"From",selectFrom:s,selectTo:o,from:a,isFrom:!0,to:i}),(0,se.jsxs)(d.kC,{flexFlow:"column nowrap",alignItems:"flex-end",children:[(0,se.jsx)(fe,{digits:f,setDigits:c,isFiat:l,balance:a,usdValue:x,setUSDValue:y,assetPrice:U,insertMode:v,setInsertMode:A}),(0,se.jsx)(pe,{usdValue:x,setUSDValue:y,digits:f,setDigits:c,isFiat:!0,balance:a,digitsUSD:g,assetPrice:U,insertMode:v,setInsertMode:A})]})]}),(0,se.jsxs)(d.kC,{flexFlow:"column nowrap",style:{width:"100%"},alignItems:"flex-start",children:[(0,se.jsx)(re.u,{balance:a,assetDetails:D.get(a.asset)}),R.isConnected&&(0,se.jsx)(ne.P,{onMultiply:u,setActiveMultiplyer:h,activeMultiplyer:p,setInsertMode:A,show100Percent:!0})]}),(0,se.jsx)(d.kC,{onClick:function(){return L(a,i)},style:{position:"absolute",bottom:-24,cursor:"pointer"},children:(0,se.jsx)(te,{width:40,height:40})})]}),(0,se.jsxs)(je,{alignItems:"center",flexFlow:"column nowrap",children:[(0,se.jsxs)(d.kC,{justifyContent:"space-between",style:{width:"100%",marginBottom:24},children:[(0,se.jsx)(ye,{label:"To",selectFrom:s,selectTo:o,to:i,isFrom:!1,from:a}),(0,se.jsxs)(d.kC,{flexFlow:"column nowrap",alignItems:"flex-end",children:[i?(0,se.jsx)(se.Fragment,{children:(0,se.jsx)(ae,{digits:f,setDigits:c,isFiat:l,balance:a,usdValue:x,setUSDValue:y,assetPrice:U,insertMode:v,setInsertMode:A,from:a,to:i,swapOutput:n,receivedValue:j,setReceivedValue:k})}):null,i?(0,se.jsx)(we,{to:i,swapOutput:n,isFiat:!0}):null]})]}),(0,se.jsxs)(d.kC,{justifyContent:"space-between",style:{width:"100%"},alignItems:"center",children:[(0,se.jsxs)(J.VY,{color:K.Rl.TRANSPARENT_WHITE,size:"s",children:["1 ",a.asset.ticker," = ~ ",_," ",i.asset.ticker]}),(0,se.jsxs)(J.VY,{color:K.Rl.TRANSPARENT_WHITE,size:"s",children:["Slip: ",(100*Number(t)).toFixed(2),"%"]})]}),(0,se.jsxs)(d.kC,{style:{position:"relative",width:"100%"},children:[(0,se.jsx)("input",{className:"input",style:{width:"100%",padding:14,height:"auto",paddingRight:48,color:K.Rl.white},placeholder:"Optional recipient address",value:S,onChange:function(e){return F(e.target.value)}}),(0,se.jsx)(d.zx,{style:{position:"absolute",right:16,padding:0,top:8},bgc:"transparent",onClick:function(){return E(!T)},children:(0,se.jsx)(X.Z,{width:26,fill:K.Rl.textHighlighted})})]})]}),(0,se.jsxs)(d.zx,{bgc:"transparent",color:K.Rl.white,fontWeight:400,fontSize:"12px",style:{margin:0},onClick:function(){(0,m.L9)(m.eb.ACTION_WIDGET_SWAP_ADVANCED,{}),Z((function(e){return!e}))},children:["Advanced",(0,se.jsx)(q.Z,{fill:K.Rl.white,width:8,style:{marginLeft:8,transform:M?"rotate(180deg)":"rotate(0deg)"}})]}),M&&(0,se.jsxs)(d.kC,{flexFlow:"column nowrap",style:{borderRadius:16,padding:"8px 0 16px 0"},children:[(0,se.jsx)(J.d8,{size:"s",color:K.Rl.textDark,children:"SLIPPAGE TOLERANCE"}),(0,se.jsx)(ve,{})]}),T&&(0,se.jsx)(d.kC,{style:{width:"100%",top:"20%",left:"calc(50% - 210px)"},children:(0,se.jsx)(he.l,{onClose:function(){return E(!1)},setAddress:function(e){C&&(C.validateAddress(H.Network.Mainnet,i.asset,S)?((0,G.ZP)("Address valid"),F(e)):G.ZP.error("The address ".concat(e," is not a valid ").concat(i.asset.symbol," address.\n          ").concat("You are in testnet mode, did you specify a mainnet address?","\n            ")))}})})]})},Se=n(80101),Fe=n(4),Oe=n(98925),De=n(47031),Ce=n(73022),Re=n(1089),Pe=n(17172),Te=n(13071),Ee=n(8137),Ie=n(70074),Me=n(41018),Ne=n(4102),Ze=n(96649),Ve=n(84458),Le=n(13231),_e=n(28809),Ue=n(95136),Be=n(96592),ze=n(31423),We=function(e){var t=e.fee,n=e.from,r=e.to,s=e.slip,o=e.minimumAmount,a=e.outputAmount,l=e.memo;if("swap"!==t.type)throw new Error("Expected to have fee type swap");if("success"!==t.state)throw new Error("Expected to have fees");var u=(0,S.Q)("tolerance"),f=(0,i.Z)(u,1)[0],m=(0,S.Q)("feeOptionKey"),p=(0,i.Z)(m,1)[0],h=(0,N.$)(),w=(0,k.J)("prices"),x=(0,i.Z)(w,1)[0],y=(0,g.L)(),b=t.affiliateFee,A=t.networkFee,j=t.feeTx,F=(0,T.xe)({fee:j,feeOptionKey:p,gasPrices:"eth-fees"===j.type?x[j.chainId]:x[Fe.S.Ethereum]}),O=(0,T.xe)({fee:A,feeOptionKey:p,gasPrices:(0,v.i)(y,"eth-fees"===A.type?c.qo.Ethereum:A.asset.chain)}),D=O?(0,Be.nj)(O[0].div(3)):null,C=D?D.sub(D.mod(1)):null;return(0,se.jsx)(se.Fragment,{children:(0,se.jsxs)(d.kC,{flexFlow:"column wrap",children:[(0,se.jsx)(J.bB,{size:"xs",color:K.Rl.TRANSPARENT_WHITE,style:{paddingLeft:20},children:"SWAP FEES"}),(0,se.jsxs)("div",{style:{borderRadius:20,border:"solid 1px ".concat(K.Rl.textDark),padding:"10px 20px"},children:[(0,se.jsx)(ze.e,{title:"Transaction Fee",data:(0,T.om)(j,p,"eth-fees"===j.type?x[j.chainId]:x[Fe.S.Ethereum])}),(0,se.jsx)(ze.e,{title:"Transaction Fee (USD)",data:(0,T.Gv)({feeTx:j,feeOptionKey:p,getPrice:h,gasPrices:"eth-fees"===j.type?x[j.chainId]:x[Fe.S.Ethereum]})}),F?(0,se.jsx)(ze.e,{title:"Gas Price",data:"".concat((0,Ue.Pv)(F)," Gwei")}):null,(0,se.jsx)(ze.e,{title:"Network Fee",data:(0,T.om)(A,p,(0,v.i)(y,c.qo.Ethereum))}),(0,se.jsx)(ze.e,{title:"Network Fee USD",data:(0,T.Gv)({feeTx:A,feeOptionKey:p,getPrice:h,gasPrices:(0,v.i)(y,c.qo.Ethereum)})}),C?(0,se.jsx)(ze.e,{title:"Gas Price (Inbound)",data:"".concat(C," Gwei \xd7 ").concat(3)}):null,(0,se.jsx)(ze.e,{title:"Affiliate Fee",data:"".concat((0,ge.Ay)(b)," ").concat(n.asset.ticker)}),(0,se.jsx)(ze.e,{title:"Affiliate Fee USD",data:"$".concat(b.amount().times(h.get(n.asset).assetPriceUSD).toFixed(2))})]}),(0,se.jsx)(J.bB,{size:"xs",color:K.Rl.TRANSPARENT_WHITE,style:{marginTop:40,paddingLeft:20},children:"SWAP DETAILS"}),(0,se.jsxs)("div",{style:{borderRadius:20,border:"solid 1px ".concat(K.Rl.textDark),padding:"10px 20px"},children:[(0,se.jsx)(ze.e,{title:"Slip tolerance",data:"".concat(f.times(100).toFixed(2),"%")}),(0,se.jsx)(ze.e,{title:"Actual Slippage",data:"".concat(s.times(100).toFixed(),"%")}),(0,se.jsx)(ze.e,{title:"Swap Output",data:"".concat((0,le.Y)((0,ge.Ay)(a),{separator:"'",forceAtLeastTwoDigits:!0})," ").concat(r.asset.ticker)}),(0,se.jsx)(ze.e,{title:"Min. Amount",data:"".concat((0,le.Y)((0,ge.Ay)(o),{separator:"'",forceAtLeastTwoDigits:!0})," ").concat(r.asset.ticker)}),(0,se.jsx)(ze.e,{title:"Memo",data:l})]})]})})},Ye=n(83253),He=n.n(Ye),qe=n(88255),Ge=n(46268),Qe=n(56904),$e=n(90801),Ke=n(63410),Je=function(e){var t=e.from,n=e.to,r=e.amount,s=e.swapOutput;return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(Ke.R,{asset:t.asset,size:55}),(0,se.jsx)(J.VY,{color:K.Rl.TRANSPARENT_WHITE,size:"s",children:"You send"}),(0,se.jsxs)(J.d8,{size:"m",margin:"0 0 16px",children:[t.asset.ticker," ".concat((0,$e.z)(t.asset,!0,!0))," ",(0,le.Y)(r.join(""),{forceAtLeastTwoDigits:!0,separator:","})]}),(0,se.jsx)(Qe.Z,{fill:K.Rl.white,width:32,height:32,style:{transform:"rotate(90deg)"}}),(0,se.jsxs)(J.d8,{size:"m",margin:"16px 0",children:[n.asset.ticker," ".concat((0,$e.z)(n.asset,!0,!0))," ",s.amount().toNumber()>0?(0,le.Y)((0,ge.Ay)(s),{forceAtLeastTwoDigits:!0,separator:","}):0]}),(0,se.jsx)(Ke.R,{asset:n.asset,size:55})]})};function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var et=(0,$.default)((function(e){return(0,se.jsx)(d.kC,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){(0,Y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))})).withConfig({displayName:"SwapSummary__Wrapper",componentId:"sc-1yim6hl-0"})(["flex-flow:column nowrap;border-radius:16px;padding:16px 0 0 0;background:rgba(255,255,255,0.15);width:100%;align-items:center;margin:16px 0;"]),tt=function(e){var t=e.from,n=e.to,r=e.amount,s=e.fee,o=e.swapOutput,a=e.toleranceHigherThanSlip,i=e.slip,l=e.minimumAmount,u=e.memo,c=(0,b.useState)(!1),d=c[0],f=c[1],m=(0,b.useCallback)((function(){"success"===s.state&&f(!0)}),[s]);return(0,se.jsxs)(et,{children:[(0,se.jsx)(Je,{from:t,amount:r,swapOutput:o,to:n}),(0,se.jsx)("div",{style:{height:16}}),a&&(0,se.jsx)(J.VY,{size:"xs",color:(0,qe.F)(1,K.Rl.ERROR),center:!0,children:"Your slippage tolerance is higher than the estimated pool slip. This might cause a different minimal amount of received funds."}),(0,se.jsx)(Ge.P,{onPress:m,fee:s}),(0,se.jsx)(He(),{isOpen:d,onRequestClose:function(){return f(!1)},contentLabel:"Swap Additional Info",style:{content:{zIndex:2,maxWidth:670,margin:"0 auto",height:"fit-content",borderRadius:16,background:"linear-gradient(162.1deg, #445F5D 15.56%, #3E5461 94.73%)",border:"none",padding:"24px 32px"},overlay:{zIndex:2,background:"rgba(0,0,0,0.8)",backdropFilter:"blur(10px)"}},children:s&&"success"===s.state&&(0,se.jsx)(We,{from:t,to:n,outputAmount:o,fee:s,slip:i,minimumAmount:l,memo:u})})]})};function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){(0,Y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var st=function(e){var t,n=e.from,r=e.to,s=e.fromAmount,o=e.swapOutput,l=e.slip,f=e.minimumAmount,h=e.onClickBack,x=e.runeBalance,y=e.recipientAddress,v=(0,N.$)(),A=(0,b.useState)(null),j=A[0],O=A[1],D=(0,b.useState)(!1),C=D[0],R=D[1],P=(0,b.useState)(!1),T=P[0],E=P[1],M=(0,b.useState)(1),L=M[0],_=M[1],U=(0,b.useState)("double-swap"),B=U[0],W=U[1],Y=(0,b.useState)({}),H=Y[0],q=Y[1],G=(0,I.Q)().affiliateFee,Q=(0,b.useState)(!1),$=Q[0],X=Q[1],ee=(0,F.LN)("network"),te=(0,i.Z)(ee,1)[0],ne=(0,z.$)("phrase"),re=(0,i.Z)(ne,1)[0],oe=(0,w.e)(),ae=(0,S.Q)("tolerance"),ie=(0,i.Z)(ae,1)[0],ue=(0,S.Q)("feeOptionKey"),ce=(0,i.Z)(ue,1)[0],de=(0,k.J)("prices"),fe=(0,i.Z)(de,1)[0],me=(0,V.Ru)(),pe=(0,Te.C)().storeTx;if(!oe)throw new Error("expected to have a client");var he=(0,b.useMemo)((function(){return l.gt(ie)}),[l,ie]),we=(0,b.useMemo)((function(){return rt(rt({},f),{},{decimal:8})}),[f]),xe=function(e){var t=e.fromAsset,n=e.toAsset,r=e.fromAmount,s=e.network,o=e.isFocused,i=e.minimalToAmount,l=e.memo,c=(0,Z.W)().getBalance,d=(0,w.e)(),f=(0,I.Q)().affiliateFee,m=(0,g.L)(),p=(0,b.useState)({type:"swap",state:"init"}),h=p[0],x=p[1],y=(0,b.useState)((function(){return c(n)}))[0],v=(0,b.useState)((function(){return c(t)}))[0],A=(0,b.useCallback)((0,a.Z)(u().mark((function e(){var n,a,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}return e.abrupt("return");case 2:if(o){e.next=4;break}return e.abrupt("return");case 4:if(l){e.next=6;break}return e.abrupt("return");case 6:return console.log("calculating fee for swapping",Date.now()),e.prev=7,x({type:"swap",state:"loading"}),e.t0=Me.J,e.t1=r,e.t2=s,e.t3=f,e.t4=m,e.t5=null!==(n=null===v||void 0===v?void 0:v.asset)&&void 0!==n?n:null,e.t6=null!==(a=null===y||void 0===y?void 0:y.asset)&&void 0!==a?a:null,e.t7=i,e.t8=l.memo,e.t9=l.includesAffiliateFee,e.next=21,d.getAddressFromAsset(s,t);case 21:return e.t10=e.sent,e.t11={fromAmount:e.t1,network:e.t2,affiliateFeeIfCharged:e.t3,inboundAddresses:e.t4,fromAsset:e.t5,toAsset:e.t6,minimalToAmount:e.t7,memo:e.t8,includesAffiliateFee:e.t9,from:e.t10},e.next=25,e.t0.getSwapFee.call(e.t0,e.t11);case 25:c=e.sent,x(c),e.next=33;break;case 29:e.prev=29,e.t12=e.catch(7),console.log("useSwapFee error: ",String(e.t12)),x({type:"swap",state:"error",feeError:e.t12});case 33:case"end":return e.stop()}}),e,null,[[7,29]])}))),[d,o,l,r,s,f,m,null===v||void 0===v?void 0:v.asset,null===y||void 0===y?void 0:y.asset,i,t]);return(0,b.useEffect)((function(){A()}),[A]),(0,b.useMemo)((function(){return h}),[h])}({fromAsset:n.asset,toAsset:r.asset,fromAmount:s,network:te,isFocused:!0,minimalToAmount:we,memo:j}),ye=(0,b.useCallback)((0,a.Z)(u().mark((function e(){var t,a,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("success"===xe.state){e.next=2;break}throw new Error("Tried to swap but `feeTx` was not set");case 2:if(console.log({memoInfo:j}),j){e.next=5;break}throw new Error("memo not fetched yet");case 5:if(console.log({memoInfo:j}),me.walletType!==V.Sq.Phrase||re){e.next=8;break}throw new Error("phrase not fetched yet");case 8:return R(!0),t=(0,p.DA)(n.asset,te)||(0,p.DA)(r.asset,te)?"simple-swap":"double-swap",W(t),e.prev=11,e.next=14,oe.swap({network:te,fromAsset:n.asset,toAsset:r.asset,feeOptionKey:ce,fee:xe.feeTx,fromAmount:s,memo:j.memo,phrase:re,gasPrices:fe[Fe.S.Ethereum],nonce:(0,Ee.Po)()});case 14:return a=e.sent,pe({from:n.asset,to:r.asset,fromAmount:(0,le.Y)((0,ge.Ay)(s),{forceAtLeastTwoDigits:!0,separator:","}),swapOutput:(0,le.Y)((0,ge.Ay)(o),{forceAtLeastTwoDigits:!0,separator:","}),type:Ie.q.SWAP,state:{state:"loading"},sendDate:new Date,tx:a}),e.prev=16,e.t0=Pe._,e.t1=t,e.t2=a.txHash,e.next=22,oe.getAddress(te,n.asset.chain);case 22:return e.t3=e.sent,e.t4=n.asset,e.t5=n.asset,e.t6=r.asset,e.t7=s,e.t8=v.get(n.asset).assetPriceUSD,e.t9=a.memo,e.t10={type:e.t1,txHash:e.t2,fromAddress:e.t3,poolAsset:e.t4,fromAsset:e.t5,toAsset:e.t6,amount:e.t7,fromAssetPrice:e.t8,memo:e.t9},e.next=32,(0,e.t0)(e.t10);case 32:e.next=37;break;case 34:e.prev=34,e.t11=e.catch(16),console.log("could not send transaction stat to backend");case 37:q([{action:t,broadcastType:"not-error",tx:a,balance:n,amount:s}]),R(!1),(0,Re.Cv)(),_(2),e.next=49;break;case 44:e.prev=44,e.t12=e.catch(11),i=[{action:t,balance:n,error:e.t12,broadcastType:"error",amount:s}],q(i),_(2);case 49:return e.prev=49,R(!1),e.finish(49);case 52:case"end":return e.stop()}}),e,null,[[11,44,49,52],[16,34]])}))),[oe,v,xe,ce,n,s,j,te,r.asset,re,fe]);(0,b.useEffect)((function(){oe.getSwapMemo({network:te,affiliateFee:G,fromAsset:n.asset,toAsset:r.asset,minToAmount:null,recipientAddress:y}).then((function(e){console.log({mem:e}),O(e)})).catch((function(e){return console.log(e)}))}),[G,oe,n.asset,r.asset,te,re,y]);var be=(0,b.useMemo)((function(){return s.gt((0,c.Bo)(n.amount))}),[s,n.amount]),ve=(0,b.useMemo)((function(){return s.lte((0,c.Bo)((0,De.t)(n.asset.chain)))}),[n.asset.chain,s]),Ae=(0,b.useMemo)((function(){return!!n.asset.synth&&(!x||x.amount.lte(0))}),[n.asset.chain,s]);return(0,se.jsxs)(d.kC,{flexFlow:"column nowrap",style:{width:"100%"},children:[1===L&&(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(Se.Z,{width:16,fill:K.Rl.gray,style:{transform:"rotate(-90deg",alignSelf:"flex-start",cursor:"pointer"},onClick:h}),(0,se.jsx)(tt,{from:n,to:r,amount:s.amount().toFixed().split(""),swapOutput:o,toleranceHigherThanSlip:he,minimumAmount:f,slip:l,fee:xe,memo:null!==(t=null===j||void 0===j?void 0:j.memo)&&void 0!==t?t:null}),(0,se.jsx)("a",{href:"https://thorchain.help/",target:"_blank",style:{margin:"0",color:K.Rl.textHighlighted,textAlign:"center"},children:"FAQ THORChain"}),"error"===xe.state?(0,se.jsx)(Ve.L,{error:xe.feeError}):null,be?(0,se.jsx)(Ne.o,{errorType:"maxSwap"}):null,ve?(0,se.jsx)(Ne.o,{errorType:"minSwap"}):null,Ae?(0,se.jsx)(Ne.o,{errorType:"minRune"}):null,"error"===xe.state||be||ve?null:(0,se.jsxs)(se.Fragment,{children:[j&&!j.includesAffiliateFee&&(0,se.jsx)(J.VY,{size:"xs",color:K.Rl.textDark,children:"THORWallet doesn't charge any trading fee for this swap. The swap does not count towards your reward missions."}),(0,se.jsx)("div",{style:{margin:"16px 0"},children:(0,se.jsx)(Le.H,{onSelect:X,active:$,label:Ce.Xy,feeError:null})})]}),(0,se.jsx)(d.zx,{onClick:function(){(0,m.L9)(m.eb.ACTION_WIDGET_SWAP,{}),me.walletType===V.Sq.Phrase?E(!0):ye()},disabled:!$||C||"success"!==xe.state||null===j||be||ve||Ae||o.amount().toNumber()<=0,style:{margin:"16px 0",width:"100%"},children:C?(0,se.jsx)(Oe.CJ,{width:24,height:24,color:K.Rl.white}):o.amount().toNumber()>0?"Swap now":"Swap output amount is to small"}),(0,se.jsx)(Ze.b,{isOpen:T,onRequestClose:function(){return E(!1)},onContinue:function(){E(!1),ye()}})]}),2===L&&(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(Se.Z,{width:16,fill:K.Rl.gray,style:{transform:"rotate(-90deg)",alignSelf:"flex-start",cursor:"pointer"},onClick:h}),(0,se.jsx)(_e.N,{routeTxs:H,type:"swap",from:n.asset,to:r.asset,action:B,shouldTransitionToMidgardStats:!0})]})]})},ot=function(e){var t,n,r=e.defaultFrom,s=e.defaultTo,o=e.runeBalance,l=(0,b.useState)(!1),x=l[0],C=l[1],R=(0,b.useState)(0),Y=R[0],H=R[1],q=(0,b.useState)(1),G=q[0],Q=q[1],$=(0,b.useState)(0),K=$[0],J=$[1],X=(0,b.useState)(r),ee=X[0],te=X[1],ne=(0,b.useState)(s),re=ne[0],oe=ne[1],ae=(0,w.e)(),ie=(0,z.$)("phrase"),le=(0,i.Z)(ie,1)[0],ue=(0,F.LN)("network"),ce=(0,i.Z)(ue,1)[0],de=(0,U.l)("selectedBalance"),fe=(0,i.Z)(de,2)[1],me=(0,_.L)("selectedAsset"),pe=(0,i.Z)(me,2)[1],he=(0,b.useState)(0),ge=he[0],we=he[1],xe=(0,g.L)(),ye=(0,V.Ru)(),be=(0,L.useRouter)(),ve=(0,b.useState)(""),Ae=ve[0],je=ve[1],Se=(0,b.useMemo)((function(){return[{id:"crypto",ticker:ee.asset.ticker,balance:ee},{id:"fiat",ticker:"USD",balance:"fiat"}]}),[ee]),Fe=(0,b.useState)((function(){return Se.map((function(){return[]}))})),Oe=Fe[0],De=Fe[1],Ce=(0,b.useState)(""),Re=Ce[0],Pe=Ce[1],Te=(0,b.useState)("crypto"),Ee=Te[0],Ie=Te[1],Me=(0,b.useState)(""),Ne=Me[0],Ze=Me[1],Ve=function(e){var t=e.digits,n=e.setDigits,r=e.options,s=e.balances,o=e.selectedIndex,l=e.setSelectedIndex,d=e.from,m=e.to,x=(0,Z.W)().getBalance,C=(0,w.e)(),R=(0,S.Q)("tolerance"),V=(0,i.Z)(R,1)[0],L=(0,O.O)("poolsArray"),_=(0,i.Z)(L,1)[0],U=(0,S.Q)("feeOptionKey"),B=(0,i.Z)(U,1)[0],z=(0,k.J)("prices"),W=(0,i.Z)(z,1)[0],Y=(0,I.Q)().affiliateFee,H=(0,g.L)(),q=(0,N.$)(),G=(0,F.LN)("network"),Q=(0,i.Z)(G,1)[0],$=(0,b.useState)((0,f.p)(0,8)),K=$[0],J=$[1],X=(0,b.useState)((0,f.p)(0,8)),ee=X[0],te=X[1],ne=(0,b.useState)("0"),re=ne[0],se=ne[1],oe=(0,b.useState)((function(){return(0,f.p)(0,8)})),ae=oe[0],ie=oe[1],le=(0,b.useState)(new(y())(0)),ue=le[0],ce=le[1],de=(0,M.w)({balances:s,options:r,digits:t,setDigits:n,selectedIndex:o,setSelectedIndex:l}),fe=de.option,me=de.onOptionChange,pe=de.assetInUSD,he=de.onDigits,ge=de.onMultiply,we=(0,b.useMemo)((function(){return(0,E.k)(d.asset,_)}),[d.asset,_]),xe=(0,b.useMemo)((function(){return(0,E.k)(m.asset,_)}),[m.asset,_]),ye=(0,b.useMemo)((function(){return x(d.asset)}),[d.asset,x]),be=(0,b.useMemo)((function(){return x(m.asset)}),[x,m.asset]),ve=(0,b.useMemo)((function(){var e;return(0,f.p)((null!==(e=t[0])&&void 0!==e?e:["0"]).join(""),d.amount.decimal)}),[t,d.amount.decimal]),Ae=(0,b.useMemo)((0,a.Z)(u().mark((function e(){var t,n,r,s,o,a,i,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===C||void 0===C?void 0:C.getAddressFromAsset(Q,d.asset);case 2:return t=e.sent,e.next=5,(0,j.U)({fromAsset:d.asset,fromAmount:ve,toAsset:m.asset,network:Q,inboundAddresses:H,from:t,memo:"",affiliateFee:new(y())(0),minToAmount:null});case 5:return n=e.sent,r="eth-fees"===n.type?W[n.chainId]:{},s=(0,T.VQ)({fee:n,feeOptionKey:B,gasPrices:r}),o=(0,p.nu)(m.asset)?0:(0,h.C)(H,m.asset.chain).gasRate,e.next=11,(0,A.NL)(m.asset,Number(o),Q);case 11:return a=e.sent,i=(0,T.VQ)({fee:a,feeOptionKey:B,gasPrices:(0,v.i)(H,m.asset.chain)}),l=i.amount,e.abrupt("return",{transactionFeeInAsset:s,networkFeeAssetAmount:l});case 14:case"end":return e.stop()}}),e)}))),[Q,d.asset,C,ve,m.asset,H,B,m.asset.chain]),je=(0,b.useCallback)((0,a.Z)(u().mark((function e(){var t,n,r,s,o,a,i,l,m,p,h,g,w,x,b;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae;case 2:if(t=e.sent,n=t.transactionFeeInAsset,r=t.networkFeeAssetAmount,ye&&!ye.amount.eq(0)){e.next=7;break}return e.abrupt("return");case 7:s=!0,o=0,i=(a=[1e-5,1e-4,.001,.01,.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,7,8,9,10,12,14,16,18,20,25,30,35,40,45,50]).length;case 11:if(!s){e.next=25;break}return p=new(y())(a[o]).dividedBy(q.get(d.asset).assetPriceUSD),h=(0,c.Bo)(null===(l=ye)||void 0===l?void 0:l.amount).amount().minus(p).minus(n.amount.amount()),g=(0,f.p)(h,null===(m=ye)||void 0===m?void 0:m.amount.decimal),e.next=17,P({fromAssetBalance:ye,toAssetBalance:be,iA:g,client:C,affiliateFee:Y,fromAssetPool:we,toAssetPool:xe,transactionFeeInAsset:n,withFees:!0,networkFeeAssetAmount:r});case 17:w=e.sent,(x=w.outputAmount).lte(0)&&(s=!1,o=1,se("0")),x.gte(0)&&(b="fiat"===fe.balance?2:Math.min(D.z9,fe.balance.amount.decimal),se(h.toFixed(b).toString()),s=!1,o=1),o===i&&(s=!1,o=1,se("0")),o++,e.next=11;break;case 25:case"end":return e.stop()}}),e)}))),[Ae,be,ye,C,Y,we,xe,fe,q]),ke=(0,b.useCallback)((0,a.Z)(u().mark((function e(){var t,n,r,s,o,a,i,l,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C||ye){e.next=2;break}return e.abrupt("return",null);case 2:if(C||ye||(ye=d),!C||be){e.next=5;break}return e.abrupt("return",null);case 5:return C||be||(be=m),e.next=8,Ae;case 8:return t=e.sent,n=t.transactionFeeInAsset,r=t.networkFeeAssetAmount,e.next=13,P({fromAssetBalance:ye,toAssetBalance:be,iA:ve,affiliateFee:Y,client:C,fromAssetPool:we,toAssetPool:xe,transactionFeeInAsset:null,withFees:!1,networkFeeAssetAmount:null});case 13:return s=e.sent,o=s.outputAmount,a=s.slip,e.next=18,P({fromAssetBalance:ye,toAssetBalance:be,iA:ve,client:C,affiliateFee:Y,fromAssetPool:we,toAssetPool:xe,transactionFeeInAsset:n,withFees:!0,networkFeeAssetAmount:r});case 18:i=e.sent,l=i.outputAmount,c=o.times(new(y())(1).minus(V)),J(o),te(l),ce(a),ie(c);case 25:case"end":return e.stop()}}),e)}))),[Y,C,ye,we,ve,be,xe,V,Ae]),Se=(0,b.useCallback)((function(e){e.eq(1)?he(re.split("")):ge(e)}),[ge,re,he]);return(0,b.useEffect)((function(){ke()}),[ke]),(0,b.useEffect)((function(){je()}),[je]),(0,b.useEffect)((function(){he(["0"])}),[d]),(0,b.useMemo)((function(){return{option:fe,onOptionChange:me,assetInUSD:pe,onDigits:he,onMultiply:Se,swapOutput:K,slip:ue,minimumAmount:ae,swapOutputWithFees:ee}}),[pe,ae,he,Se,me,fe,ue,K,ee])}({balances:[ee],options:Se,digits:Oe,setDigits:De,selectedIndex:ge,setSelectedIndex:we,from:ee,to:re}),Le=Ve.option,_e=Ve.onOptionChange,Ue=Ve.onDigits,Be=Ve.onMultiply,ze=Ve.swapOutput,We=Ve.slip,Ye=Ve.minimumAmount,He=Ve.swapOutputWithFees;(0,b.useEffect)((function(){te(r)}),[r]),(0,b.useEffect)((function(){oe(s)}),[s]);var qe=(0,b.useCallback)((0,a.Z)(u().mark((function e(){var t,n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.isConnected){e.next=2;break}return e.abrupt("return");case 2:if(ae){e.next=4;break}return e.abrupt("return");case 4:if(ye.walletType!==V.Sq.Phrase||le){e.next=6;break}return e.abrupt("return");case 6:if((0,m.L9)(m.eb.ACTION_WIDGET_SWAP_PREVIEW,{fromAsset:ee.asset.symbol,toAsset:re.asset.symbol}),-1!==(t=Se.indexOf(Se.find((function(e){return e.ticker===ee.asset.ticker}))))){e.next=10;break}throw new Error("swap screen crypto index not found");case 10:return J((0,f.p)(Oe[t].join(""),ee.amount.decimal)),(0,p.Jy)(ee.asset)||Q(3),e.prev=12,C(!0),e.t0=ae,e.t1=ce,e.t2=ee.asset,e.t3=xe,e.next=20,ae.getAddress(ce,c.qo.Ethereum);case 20:return e.t4=e.sent,e.t5=le,e.t6={network:e.t1,fromAsset:e.t2,inboundAddresses:e.t3,address:e.t4,phrase:e.t5},e.next=25,e.t0.getThorchainContractAllowance.call(e.t0,e.t6);case 25:n=e.sent,r=n.gte((0,f.p)(Oe[t].join(""),ee.amount.decimal).amount()),(0,p.Jy)(ee.asset)&&!r?Q(2):Q(3),e.next=33;break;case 30:e.prev=30,e.t7=e.catch(12),console.log("allowed bug",String(e.t7));case 33:return e.prev=33,C(!1),e.finish(33);case 36:case"end":return e.stop()}}),e,null,[[12,30,33,36]])}))),[ae,Oe,ee,Ye,Se,le,We,ze,re,ce,xe,K]),Ge=(0,b.useCallback)((function(e,t){te(t),oe(e),fe(t)}),[re,ee]),Qe=(0,b.useCallback)((function(e){te(e),pe(e.asset),be.pathname.includes("/asset")&&be.push("/asset/".concat(e.asset.symbol))}),[ee]),$e=(0,b.useCallback)((function(e){oe(e)}),[re]);return(0,b.useEffect)((function(){H(0)}),[ee]),(0,se.jsxs)(d.kC,{flexFlow:"column nowrap",style:{width:"100%"},children:[1===G&&(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(ke,{slip:We,swapOutput:ze,balance:ee,from:ee,to:re,onPressFrom:Qe,onPressTo:$e,onReverse:Ge,isFiat:"fiat"===Le.id,onMultiply:Be,setDigits:Ue,digits:null!==(t=Oe[ge])&&void 0!==t?t:["0"],digitsUSD:null!==(n=Oe[ge+1])&&void 0!==n?n:["0"],onOptionChange:_e,option:Le,options:Se,setActiveMultiplyer:H,activeMultiplyer:Y,usdValue:Re,setUSDValue:Pe,insertMode:Ee,setInsertMode:Ie,receivedValue:Ne,setReceivedValue:Ze,recipientAddress:Ae,setRecipientAddress:je}),(0,se.jsx)(d.zx,{style:{marginTop:12},disabled:x,onClick:function(){return ye.isConnected?qe():void B.e.setGlobalState("modal",{type:"connect-wallet"})},withShadow:!0,children:ye.isConnected?"Preview Swap":"Connect Wallet"})]}),2===G&&(0,se.jsx)(W.R,{asset:ee.asset,amount:K,spender:(0,h.C)(xe,c.qo.Ethereum).router,onClickBack:function(){return Q(1)},from:ee,setStep:Q}),3===G&&(0,se.jsx)(st,{from:ee,to:re,fromAmount:K,swapOutput:He,slip:We,minimumAmount:Ye,onClickBack:function(){return Q(1)},runeBalance:o,recipientAddress:Ae})]})}},73022:function(e,t,n){n.d(t,{Xy:function(){return r},tL:function(){return s},KC:function(){return o}});var r="This swap is provided by THORChain (and not THORWallet) and in accordance with THORChain".concat("'","s terms. By pressing ",'"',"Swap now",'"',", you transmit the transaction/swap without a right of withdrawal."),s="Liquidity Pooling is provided by THORChain (and not THORWallet) and in accordance with THORChain".concat("'","s terms. By pressing ",'"',"Add Liquidity",'"',", you transmit the transaction."),o="Liquidity Withdrawal is provided by THORChain (and not THORWallet) and in accordance with THORChain".concat("'","s terms. By pressing ",'"',"Withdraw Liquidity",'"',", you transmit the transaction.")}}]);